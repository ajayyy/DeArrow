{"version":3,"file":"unactivatedWarning.js","mappings":"4gBACA,mBAAiCA,EAAoBC,EAAU,IAAMC,EAAQ,IAAKC,G,yCAC9E,aAAa,IAAIC,SAAQ,CAACC,EAASC,KAC/B,IAAIC,EAAkC,KAEtC,MAAMC,EAAgB,KAClB,MAAMC,EAAST,KACXG,EAAYA,EAAUM,GAAUA,KAChCJ,EAAQI,GACJF,GAAUG,cAAcH,G,EAIhCN,IACAU,YAAW,KACPD,cAAcH,GACdD,EAAO,uBAAuBN,aAAS,EAATA,EAAWY,eAAeC,QAAQC,QAAQ,GACzEb,GAEHM,EAAWQ,YAAYP,EAAeN,IAI1CM,GAAe,GAEvB,G,EAEA,uBAA+BQ,EAAaC,EAASC,GACjD,IAAIC,EAAU,EACd,IAAK,MAAMC,KAAOH,EAAM,CACpB,MAAMI,EAAaL,EAAIM,SAAS,MAAQH,EAAU,EAAK,IAAOD,EAAsB,IAAM,GACpFK,EAA+B,iBAAfN,EAAKG,GAAsBH,EAAKG,GAA4BI,KAAKC,UAAUR,EAAKG,IACtGJ,GAAOK,EAAYK,mBAAmBN,GAAO,IAAMM,mBAAmBH,GAEtEJ,G,CAGJ,OAAOH,CACX,EAEA,MAAaW,UAA+Bd,MAGxC,WAAAe,CAAYC,GACRC,MAAM,qBAENC,KAAKF,QAAUA,CACnB,EAqBJ,IAAIG,EA5BJ,wBAUA,yBAAiC/B,GAC7B,OAAO,IAAIG,SAAQ,CAACC,EAASC,KACrBL,GACAU,YAAW,KACPL,EAAO,IAAIqB,EAAsB,GAClC1B,E,GAGf,EAKA,+BAEI,MAA2B,oBAAd,OACjB,EAGA,gCAEI,OADA+B,UAAAA,EAAoB,GAAGC,OAAOC,QAAQC,OAAOF,OAAOC,QAAQE,cAAcC,WACnEL,CACX,C,mFCxEA,uBAEI,GAA4B,aAAxBM,SAASC,WACT,IAAK,MAAMC,KAAWF,SAASG,iBAAiB,4HAC5CD,EAAQE,QAGpB,C,GCNIC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUM,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAGpEK,EAAOD,OACf,C,MCtBA,gBACA,UAEA,IAAI,IAAAI,qBAAqB,EACrB,IAAAC,aAEA,MAAMC,EAAyBhB,SAASG,iBAAiB,OACzD,IAAK,MAAMD,KAAWc,EACY,SAA1Bd,EAAQe,MAAMC,SACdhB,EAAQe,MAAME,eAAe,U,CAKzC,IAAIC,EAAqCpB,SAASqB,eAAe,+BASjE,SAASC,IACL3B,OAAO4B,QAAQC,KAAKC,IAAI,CAAC,YAAa,iBAAkB,iBAAkB,2BAA4BC,IAClG,KAAKA,EAAEC,WAAcD,EAAEE,gBAAmBF,EAAEG,gBAAmBH,EAAEI,wBAAwB,CACrF,MAAMC,EAAoB,KACtBX,EAAiBpB,SAASgC,cAAc,OACxCZ,EAAevB,GAAK,8BACpBuB,EAAeH,MAAMgB,SAAW,QAChCb,EAAeH,MAAMiB,IAAM,IAC3Bd,EAAeH,MAAMkB,KAAO,IAC5Bf,EAAeH,MAAMmB,MAAQ,IAC7BhB,EAAeH,MAAMC,QAAU,OAC/BE,EAAeH,MAAMoB,WAAa,SAClCjB,EAAeH,MAAMqB,eAAiB,SACtClB,EAAeH,MAAMsB,cAAgB,SACrCnB,EAAeH,MAAMuB,gBAAkB,UACvCpB,EAAeH,MAAMwB,OAAS,WAC9BrB,EAAeH,MAAMyB,QAAU,OAE/B,MAAMC,EAAO3C,SAASgC,cAAc,OACpCW,EAAKC,IAAMjD,OAAOC,QAAQiD,OAAO,kBACjCF,EAAK1B,MAAM6B,MAAQ,OAEnB,MAAMC,EAAO/C,SAASgC,cAAc,QACpCe,EAAKC,UAAYrD,OAAOsD,KAAKC,WAAW,uBACxCH,EAAK9B,MAAMkC,MAAQ,QACnBJ,EAAK9B,MAAMmC,SAAW,OACtBL,EAAK9B,MAAMyB,QAAU,OAErB,MAAMW,EAAiBC,EAAa3D,OAAOsD,KAAKC,WAAW,oBAC3DG,EAAeE,iBAAiB,SAAS,KAChC5D,OAAOC,QAAQ4D,YAAY,CAAEC,QAAS,eAAgB,IAG/D,MAAMC,EAAcJ,EAAa3D,OAAOsD,KAAKC,WAAW,UACxDQ,EAAYH,iBAAiB,QAASI,GAEtCvC,EAAewC,YAAYjB,GAC3BvB,EAAewC,YAAYb,GAC3B3B,EAAewC,YAAYP,GAC3BjC,EAAewC,YAAYF,GAE3B1D,SAAS6D,KAAKD,YAAYxC,GAE1BzB,OAAO4B,QAAQC,KAAKsC,UAAUC,aAAaC,KACnCA,EAAQrC,WAAaqC,EAAQpC,gBAAkBoC,EAAQnC,gBAAkBmC,EAAQlC,yBACjF6B,G,GAEN,EAGsB,aAAxB3D,SAASC,WACT8B,IAEAkC,OAAOV,iBAAiB,mBAAoBxB,E,IAI5D,CAEA,SAASuB,EAAaP,GAClB,MAAMmB,EAASlE,SAASgC,cAAc,OAWtC,OAVAkC,EAAOlB,UAAYD,EACnBmB,EAAOjD,MAAMkD,OAAS,UACtBD,EAAOjD,MAAMuB,gBAAkB,UAC/B0B,EAAOjD,MAAMkC,MAAQ,QACrBe,EAAOjD,MAAMyB,QAAU,OACvBwB,EAAOjD,MAAMmD,aAAe,MAC5BF,EAAOjD,MAAMmC,SAAW,OACxBc,EAAOjD,MAAM6B,MAAQ,cACrBoB,EAAOjD,MAAMoD,aAAe,OAErBH,CACX,CAEA,SAASP,IACDvC,IACAA,EAAehB,SACfgB,EAAiB,KAEzB,CAvFAuC,IAEI3D,SAASsE,WACThD,IAEA2C,OAAOV,iBAAiB,YAAajC,EAAwB,CAAEiD,MAAM,G","sources":["webpack:///./maze-utils/src/index.ts","webpack:///./src/utils/pageCleaner.ts","webpack:///webpack/bootstrap","webpack:///./src/unactivatedWarning.ts"],"sourcesContent":["/** Function that can be used to wait for a condition before returning. */\nexport async function waitFor<T>(condition: () => T, timeout = 5000, check = 100, predicate?: (obj: T) => boolean): Promise<T> {\n    return await new Promise((resolve, reject) => {\n        let interval: NodeJS.Timeout | null = null;\n\n        const intervalCheck = () => {\n            const result = condition();\n            if (predicate ? predicate(result) : result) {\n                resolve(result);\n                if (interval) clearInterval(interval);\n            }\n        };\n\n        if (timeout) {\n            setTimeout(() => {\n                clearInterval(interval!);\n                reject(`TIMEOUT waiting for ${condition?.toString()}: ${Error().stack}`);\n            }, timeout);\n\n            interval = setInterval(intervalCheck, check);\n        }\n        \n        // Run the check once first, this speeds it up a lot\n        intervalCheck();\n    });\n}\n\nexport function objectToURI<T>(url: string, data: T, includeQuestionMark: boolean): string {\n    let counter = 0;\n    for (const key in data) {\n        const seperator = (url.includes(\"?\") || counter > 0) ? \"&\" : (includeQuestionMark ? \"?\" : \"\");\n        const value = (typeof(data[key]) === \"string\") ? data[key] as unknown as string : JSON.stringify(data[key]);\n        url += seperator + encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\n\n        counter++;\n    }\n\n    return url;\n}\n\nexport class PromiseTimeoutError<T> extends Error {\n    promise?: Promise<T>;\n\n    constructor(promise?: Promise<T>) {\n        super(\"Promise timed out\");\n\n        this.promise = promise;\n    }\n}\n\nexport function timeoutPomise<T>(timeout?: number): Promise<T> {\n    return new Promise((resolve, reject) => {\n        if (timeout) {\n            setTimeout(() => {\n                reject(new PromiseTimeoutError());\n            }, timeout);\n        }\n    });\n}\n\n/**\n* web-extensions\n*/\nexport function isFirefoxOrSafari(): boolean {\n    // @ts-ignore\n    return typeof(browser) !== \"undefined\";\n}\n\nlet cachedUserAgent: string;\nexport function extensionUserAgent(): string {\n    cachedUserAgent ??= `${chrome.runtime.id}/v${chrome.runtime.getManifest().version}`;\n    return cachedUserAgent;\n}\n","export function cleanPage() {\n    // For live-updates\n    if (document.readyState === \"complete\") {\n        for (const element of document.querySelectorAll(\".cbShowOriginal, .cb-css, #cbSubmitMenu, .cbTitleButtonContainer, .cbCustomThumbnailCanvas, #dearrow-unactivated-warning\")) {\n            element.remove();\n        }\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { isFirefoxOrSafari } from \"../maze-utils/src\";\nimport { cleanPage } from \"./utils/pageCleaner\";\n\nif (isFirefoxOrSafari()) {\n    cleanPage();\n\n    const possibleHiddenElements = document.querySelectorAll(\"img\");\n    for (const element of possibleHiddenElements) {\n        if (element.style.display === \"none\") {\n            element.style.removeProperty(\"display\");\n        }\n    }\n}\n\nlet warningElement: HTMLElement | null = document.getElementById(\"dearrow-unactivated-warning\");\ncloseWarningButton();\n\nif (document.hasFocus()) {\n    displayWarningIfNeeded();\n} else {\n    window.addEventListener(\"mousemove\", displayWarningIfNeeded, { once: true });\n}\n\nfunction displayWarningIfNeeded() {\n    chrome.storage.sync.get([\"activated\", \"freeTrialStart\", \"freeTrialEnded\", \"freeAccessRequestStart\"], (v) => {\n        if (!v.activated && !v.freeTrialStart && !v.freeTrialEnded && !v.freeAccessRequestStart) {\n            const addWarningElement = () => {\n                warningElement = document.createElement(\"div\");\n                warningElement.id = \"dearrow-unactivated-warning\";\n                warningElement.style.position = \"fixed\";\n                warningElement.style.top = \"0\";\n                warningElement.style.left = \"0\";\n                warningElement.style.right = \"0\";\n                warningElement.style.display = \"flex\";\n                warningElement.style.alignItems = \"center\";\n                warningElement.style.justifyContent = \"center\";\n                warningElement.style.flexDirection = \"column\";\n                warningElement.style.backgroundColor = \"#171717\";\n                warningElement.style.zIndex = \"10000000\";\n                warningElement.style.padding = \"20px\";\n        \n                const icon = document.createElement(\"img\");\n                icon.src = chrome.runtime.getURL(\"icons/logo.svg\");\n                icon.style.width = \"30px\";\n        \n                const text = document.createElement(\"span\");\n                text.innerText = chrome.i18n.getMessage(\"DeArrowNotActivated\");\n                text.style.color = \"white\";\n                text.style.fontSize = \"17px\";\n                text.style.padding = \"20px\";\n        \n                const activateButton = createButton(chrome.i18n.getMessage(\"ActivateDeArrow\"));\n                activateButton.addEventListener(\"click\", () => {\n                    void chrome.runtime.sendMessage({ message: \"openPayment\" });\n                });\n        \n                const closeButton = createButton(chrome.i18n.getMessage(\"Close\"));\n                closeButton.addEventListener(\"click\", closeWarningButton);\n        \n                warningElement.appendChild(icon);\n                warningElement.appendChild(text);\n                warningElement.appendChild(activateButton);\n                warningElement.appendChild(closeButton);\n        \n                document.body.appendChild(warningElement);\n        \n                chrome.storage.sync.onChanged.addListener((changes) => {\n                    if (changes.activated || changes.freeTrialStart || changes.freeTrialEnded || changes.freeAccessRequestStart) {\n                        closeWarningButton();\n                    }\n                });\n            };\n            \n            if (document.readyState === \"complete\") {\n                addWarningElement();\n            } else {\n                window.addEventListener(\"DOMContentLoaded\", addWarningElement);\n            }\n        }\n    });\n}\n\nfunction createButton(text: string): HTMLElement {\n    const button = document.createElement(\"div\");\n    button.innerText = text;\n    button.style.cursor = \"pointer\";\n    button.style.backgroundColor = \"#0e79ca\";\n    button.style.color = \"white\";\n    button.style.padding = \"10px\";\n    button.style.borderRadius = \"5px\";\n    button.style.fontSize = \"14px\";\n    button.style.width = \"max-content\";\n    button.style.marginBottom = \"10px\";\n\n    return button;\n}\n\nfunction closeWarningButton() {\n    if (warningElement) {\n        warningElement.remove();\n        warningElement = null;\n    }\n}"],"names":["condition","timeout","check","predicate","Promise","resolve","reject","interval","intervalCheck","result","clearInterval","setTimeout","toString","Error","stack","setInterval","url","data","includeQuestionMark","counter","key","seperator","includes","value","JSON","stringify","encodeURIComponent","PromiseTimeoutError","constructor","promise","super","this","cachedUserAgent","chrome","runtime","id","getManifest","version","document","readyState","element","querySelectorAll","remove","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","isFirefoxOrSafari","cleanPage","possibleHiddenElements","style","display","removeProperty","warningElement","getElementById","displayWarningIfNeeded","storage","sync","get","v","activated","freeTrialStart","freeTrialEnded","freeAccessRequestStart","addWarningElement","createElement","position","top","left","right","alignItems","justifyContent","flexDirection","backgroundColor","zIndex","padding","icon","src","getURL","width","text","innerText","i18n","getMessage","color","fontSize","activateButton","createButton","addEventListener","sendMessage","message","closeButton","closeWarningButton","appendChild","body","onChanged","addListener","changes","window","button","cursor","borderRadius","marginBottom","hasFocus","once"],"sourceRoot":""}